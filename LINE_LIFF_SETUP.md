# üì± ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Line LIFF (Line Front-end Framework)

## üìã **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Line LIFF**

### **1. ‡∏™‡∏£‡πâ‡∏≤‡∏á LIFF App**

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Line Developers Console](https://developers.line.biz/)
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Channel ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Line Login
3. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **"LIFF"** tab
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Add"** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á LIFF App

### **2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LIFF App**

1. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LIFF App:
   - **LIFF app name**: `readBOOK`
   - **Size**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Full"** (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠)
   - **Endpoint URL**: 
     ```
     http://localhost:3000/liff
     https://your-domain.com/liff
     ```
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Add"**

### **3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LIFF Features**

1. ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ LIFF App settings
2. ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:
   - ‚úÖ **Use ID Token**
   - ‚úÖ **Use Access Token**
   - ‚úÖ **Use Profile**
   - ‚úÖ **Use Share Target Picker**
3. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Save"**

### **4. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Scopes**

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **"Scopes"** section
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å scopes ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:
   - ‚úÖ **openid**
   - ‚úÖ **profile**
   - ‚úÖ **email**
3. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Save"**

### **5. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å LIFF ID**

1. ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á LIFF App ‡πÄ‡∏™‡∏£‡πá‡∏à
2. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å **LIFF ID**: `1234567890-abcdefgh`
3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ environment variables

### **6. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables**

‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.env.local`:

```env
# Line LIFF
NEXT_PUBLIC_LIFF_ID=1234567890-abcdefgh
NEXT_PUBLIC_LIFF_ENDPOINT=https://liff.line.me
```

### **7. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö LIFF App**

#### **7.1 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Browser**

1. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå:
   ```bash
   npm run dev
   ```

2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `http://localhost:3000/liff`
3. ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤ LIFF ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "LIFF ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô"

#### **7.2 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Line App**

1. ‡πÄ‡∏õ‡∏¥‡∏î Line App ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
2. ‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå LIFF
3. ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤ readBOOK ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

## üîß **‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô LIFF**

### **1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á LIFF**

```typescript
import { initializeLiff, isInLineApp, getLiffProfile } from '@/lib/liff';

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF
const success = await initializeLiff();

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Line App ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
const inLine = isInLineApp();

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
const profile = await getLiffProfile();
```

### **2. ‡πÅ‡∏ä‡∏£‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏á Line**

```typescript
import { shareToLine } from '@/lib/liff';

// ‡πÅ‡∏ä‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
await shareToLine('üìö ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° Python');

// ‡πÅ‡∏ä‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏¥‡∏á‡∏Å‡πå
await shareToLine(
  'üìö ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° Python',
  'https://your-domain.com/books/1'
);
```

### **3. ‡πÄ‡∏õ‡∏¥‡∏î Browser ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å**

```typescript
import { openExternalBrowser } from '@/lib/liff';

// ‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏ô browser ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
openExternalBrowser('https://your-domain.com/books/1');
```

### **4. ‡∏õ‡∏¥‡∏î LIFF App**

```typescript
import { closeLiffApp } from '@/lib/liff';

// ‡∏õ‡∏¥‡∏î LIFF App
closeLiffApp();
```

## üö® **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô**

### **Error: LIFF initialization failed**

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: LIFF ID ‡∏ú‡∏¥‡∏î‡∏´‡∏£‡∏∑‡∏≠ LIFF App ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**:
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `NEXT_PUBLIC_LIFF_ID`
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö LIFF App ‡πÉ‡∏ô Line Console
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Endpoint URL

### **Error: User not logged in**

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÉ‡∏ô Line

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**:
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Scopes
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LIFF Features
3. ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

### **Error: Share to LINE failed**

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏î‡πâ

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**:
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Share Target Picker
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Scopes
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á LIFF

## üìö **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**

- [Line LIFF Documentation](https://developers.line.biz/en/docs/liff/)
- [Line LIFF API Reference](https://developers.line.biz/en/reference/liff/)
- [Line Developers Console](https://developers.line.biz/)

## ‚úÖ **Checklist**

- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á LIFF App
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LIFF App
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LIFF Features
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Scopes
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Browser
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Line App
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

## üîê **Security Notes**

1. **LIFF ID**: ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î
2. **Endpoint URL**: ‡πÉ‡∏ä‡πâ HTTPS ‡πÉ‡∏ô production
3. **Scopes**: ‡∏Ç‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
4. **User Data**: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

## üéØ **Best Practices**

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö LIFF**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ LIFF ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
2. **Error Handling**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ error ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
3. **User Experience**: ‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏±‡πâ‡∏á‡πÉ‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡∏≠‡∏Å Line App
4. **Performance**: ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û

---

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Endpoint URL ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ HTTPS
